(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d381e800"],{4558:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),n={class:"container"},o={class:"table mt-4"},r=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{width:"120"}," 訂單編號 "),Object(a["g"])("th",{width:"90"},"購買人"),Object(a["g"])("th",{width:"90"}," email "),Object(a["g"])("th",{width:"90"}," 購買日期 "),Object(a["g"])("th",{width:"90"}," 訂單金額 "),Object(a["g"])("th",{width:"90"}," 訂單狀態 "),Object(a["g"])("th",{width:"120"}," 編輯 ")])],-1),l={key:0,class:"text-success"},d={key:1},s={class:"btn-group"},b=["onClick"],i=["onClick"];function O(t,e,c,O,u,g){var j=Object(a["F"])("Pagination"),p=Object(a["F"])("OrderModal");return Object(a["x"])(),Object(a["f"])("div",n,[Object(a["g"])("table",o,[r,Object(a["g"])("tbody",null,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["E"])(u.ordersData,(function(t){return Object(a["x"])(),Object(a["f"])("tr",{key:t.id},[Object(a["g"])("td",null,Object(a["I"])(t.id),1),Object(a["g"])("td",null,Object(a["I"])(t.user.name),1),Object(a["g"])("td",null,Object(a["I"])(t.user.email),1),Object(a["g"])("td",null,Object(a["I"])(g.timeStapChange(1e3*t.create_at)),1),Object(a["g"])("td",null,Object(a["I"])(t.total),1),Object(a["g"])("td",null,[t.is_paid?(Object(a["x"])(),Object(a["f"])("span",l,"已付款")):(Object(a["x"])(),Object(a["f"])("span",d,"未付款"))]),Object(a["g"])("td",null,[Object(a["g"])("div",s,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return g.openModal(t)}}," 詳情 ",8,b),Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return g.delOrder(t.id)}}," 刪除 ",8,i)])])])})),128))])]),Object(a["i"])(j,{pagination:u.pagination,onPageChange:g.getOrdersData},null,8,["pagination","onPageChange"]),Object(a["i"])(p,{ref:"orderModal","temp-order":u.tempOrder,onDelOrder:g.delOrder,onChangePaid:g.getOrdersData},null,8,["temp-order","onDelOrder","onChangePaid"])])}var u=c("5530"),g=(c("99af"),c("ac1f"),c("5319"),c("1799")),j={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},p={class:"modal-dialog modal-xl modal-dialog-centered"},m={class:"modal-content"},h=Object(a["g"])("div",{class:"modal-header"},[Object(a["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},"產品詳情"),Object(a["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},v={class:"row border-bottom mb-3"},D={class:"col-6"},k=Object(a["g"])("h5",{class:"mb-3"},"訂購人資訊",-1),x={class:"mb-3"},y=Object(a["g"])("p",{class:"mb-1"},"訂購人",-1),M={class:"mb-1"},w={class:"mb-3"},C=Object(a["g"])("p",{class:"mb-1"},"訂購信箱",-1),I={class:"mb-1"},$={class:"mb-3"},S=Object(a["g"])("p",{class:"mb-1"},"訂購電話",-1),P={class:"mb-1"},_={class:""},F=Object(a["g"])("p",{class:"mb-1"},"訂購地址",-1),E={class:"mb-1"},L={class:"col-6"},J=Object(a["g"])("h5",{class:"mb-3"},"訂單資訊",-1),T={class:"mb-3"},Y=Object(a["g"])("p",{class:"mb-1"},"訂單編號",-1),q={class:"mb-1"},z={class:"mb-3"},A=Object(a["g"])("p",{class:"mb-1"},"訂單時間",-1),B={class:"mb-1"},H={class:"mb-3"},R=Object(a["g"])("p",{class:"mb-1"},"訂單金額",-1),U={class:"mb-1"},V={class:"mb-3"},X=Object(a["g"])("p",{class:"mb-1"},"訂單付款狀態",-1),G={class:"form-check"},K={key:0,class:"form-check-label text-success",for:"flexCheckDefault"},N={key:1,class:"form-check-label",for:"flexCheckDefault"},Q=Object(a["g"])("h5",null,"訂單內容",-1),W={class:"table"},Z=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{scope:"col"},"編號"),Object(a["g"])("th",{scope:"col"},"產品名稱"),Object(a["g"])("th",{scope:"col"},"數量"),Object(a["g"])("th",{scope:"col"},"金額")])],-1),tt={class:"modal-footer"},et=Object(a["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function ct(t,e,c,n,o,r){var l,d,s,b;return Object(a["x"])(),Object(a["f"])("div",j,[Object(a["g"])("div",p,[Object(a["g"])("div",m,[h,Object(a["g"])("div",f,[Object(a["g"])("div",v,[Object(a["g"])("div",D,[k,Object(a["g"])("div",x,[y,Object(a["g"])("p",M,Object(a["I"])(null===(l=o.tempOrderData.user)||void 0===l?void 0:l.name),1)]),Object(a["g"])("div",w,[C,Object(a["g"])("p",I,Object(a["I"])(null===(d=o.tempOrderData.user)||void 0===d?void 0:d.email),1)]),Object(a["g"])("div",$,[S,Object(a["g"])("p",P,Object(a["I"])(null===(s=o.tempOrderData.user)||void 0===s?void 0:s.tel),1)]),Object(a["g"])("div",_,[F,Object(a["g"])("p",E,Object(a["I"])(null===(b=o.tempOrderData.user)||void 0===b?void 0:b.address),1)])]),Object(a["g"])("div",L,[J,Object(a["g"])("div",T,[Y,Object(a["g"])("p",q,Object(a["I"])(o.tempOrderData.id),1)]),Object(a["g"])("div",z,[A,Object(a["g"])("p",B,Object(a["I"])(r.timeStapChange(1e3*o.tempOrderData.create_at)),1)]),Object(a["g"])("div",H,[R,Object(a["g"])("p",U,Object(a["I"])(o.tempOrderData.total),1)]),Object(a["g"])("div",V,[X,Object(a["g"])("div",G,[Object(a["R"])(Object(a["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return o.tempOrderData.is_paid=t})},null,512),[[a["L"],o.tempOrderData.is_paid]]),o.tempOrderData.is_paid?(Object(a["x"])(),Object(a["f"])("label",K," 已付款 ")):(Object(a["x"])(),Object(a["f"])("label",N," 未付款 "))])])])]),Q,Object(a["g"])("table",W,[Z,Object(a["g"])("tbody",null,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["E"])(o.tempOrderData.products,(function(t,e){return Object(a["x"])(),Object(a["f"])("tr",{key:t.id},[Object(a["g"])("td",null,Object(a["I"])(e),1),Object(a["g"])("td",null,Object(a["I"])(t.product.title),1),Object(a["g"])("td",null,Object(a["I"])(t.qty),1),Object(a["g"])("td",null,Object(a["I"])(t.total),1)])})),128))])])]),Object(a["g"])("div",tt,[et,Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=function(t){return r.delOrder(o.tempOrderData.id)})},"刪除"),Object(a["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=function(t){return r.changePaid(o.tempOrderData.id)})},"修改")])])])])}var at=c("7c2b"),nt=c.n(at),ot={data:function(){return{orderModal:"",tempOrderData:{}}},props:["tempOrder"],methods:{openModal:function(){this.orderModal.show()},timeStapChange:function(t){var e=new Date(t),c="".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds());return c},delOrder:function(t){this.$emit("del-order",t),this.orderModal.hide()},changePaid:function(t){var e=this,c={data:Object(u["a"])({},this.tempOrderData)};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/order/").concat(t),c).then((function(){e.$emit("change-paid",t),e.orderModal.hide()})).catch((function(t){console.dir(t)}))}},mounted:function(){this.orderModal=new nt.a(document.getElementById("orderModal"))},watch:{tempOrder:function(){this.tempOrderData=Object(u["a"])({},this.tempOrder)}}},rt=c("6b0d"),lt=c.n(rt);const dt=lt()(ot,[["render",ct]]);var st=dt,bt={data:function(){return{ordersData:[],pagination:{},tempOrder:{}}},components:{Pagination:g["a"],OrderModal:st},methods:{getOrdersData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/orders?page=").concat(e)).then((function(e){console.log(e),t.ordersData=e.data.orders,t.pagination=e.data.pagination})).catch((function(t){console.dir(t)}))},delOrder:function(t){var e=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/order/").concat(t)).then((function(t){alert(t.data.message),e.getOrdersData()})).catch((function(t){console.dir(t)}))},timeStapChange:function(t){var e=new Date(t),c="".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate());return c},openModal:function(t){this.tempOrder=Object(u["a"])({},t),this.$refs.orderModal.openModal(t)}},mounted:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t,this.getOrdersData()}};const it=lt()(bt,[["render",O]]);e["default"]=it},b0c0:function(t,e,c){var a=c("83ab"),n=c("5e77").EXISTS,o=c("e330"),r=c("9bf2").f,l=Function.prototype,d=o(l.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,b=o(s.exec),i="name";a&&!n&&r(l,i,{configurable:!0,get:function(){try{return b(s,d(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-d381e800.8f33e5cb.js.map