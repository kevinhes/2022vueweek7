(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-765ccbe6"],{"94ad":function(t,e,a){"use strict";a.r(e);var c=a("7a23"),o={class:"container"},l={class:"text-end mt-4"},n={class:"table mt-4"},d=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th",{width:"120"}," 分類 "),Object(c["g"])("th",null,"產品名稱"),Object(c["g"])("th",{width:"120"}," 原價 "),Object(c["g"])("th",{width:"120"}," 售價 "),Object(c["g"])("th",{width:"100"}," 是否啟用 "),Object(c["g"])("th",{width:"120"}," 編輯 ")])],-1),r={class:"text-end"},i={class:"text-end"},s={key:0,class:"text-success"},u={key:1},b={class:"btn-group"},p=["onClick"],g=["onClick"];function O(t,e,a,O,j,m){var f=Object(c["F"])("Pagination"),h=Object(c["F"])("ProductModal"),v=Object(c["F"])("DelModal");return Object(c["x"])(),Object(c["f"])("div",o,[Object(c["g"])("div",l,[Object(c["g"])("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=function(t){return m.openModal("new")})}," 建立新的產品 ")]),Object(c["g"])("table",n,[d,Object(c["g"])("tbody",null,[(Object(c["x"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(j.productsData,(function(t){return Object(c["x"])(),Object(c["f"])("tr",{key:t.id},[Object(c["g"])("td",null,Object(c["I"])(t.category),1),Object(c["g"])("td",null,Object(c["I"])(t.title),1),Object(c["g"])("td",r,Object(c["I"])(t.origin_price),1),Object(c["g"])("td",i,Object(c["I"])(t.price),1),Object(c["g"])("td",null,[t.is_enabled?(Object(c["x"])(),Object(c["f"])("span",s,"啟用")):(Object(c["x"])(),Object(c["f"])("span",u,"未啟用"))]),Object(c["g"])("td",null,[Object(c["g"])("div",b,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return m.openModal("edit",t)}}," 編輯 ",8,p),Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return m.openModal("delete",t)}}," 刪除 ",8,g)])])])})),128))])]),Object(c["i"])(f,{pagination:j.pagination,onPageChange:m.getProductsData},null,8,["pagination","onPageChange"]),Object(c["i"])(h,{product:j.product,"is-new":j.isNew,ref:"productModal",onGetData:m.getProductsData},null,8,["product","is-new","onGetData"]),Object(c["i"])(v,{ref:"delModal",product:j.product,onGetData:m.getProductsData},null,8,["product","onGetData"])])}var j=a("5530"),m=(a("99af"),a("ac1f"),a("5319"),a("1799")),f=(a("a4d3"),a("e01a"),{id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),h={class:"modal-dialog modal-xl"},v={class:"modal-content border-0"},y={class:"modal-header bg-dark text-white"},D={id:"productModalLabel",class:"modal-title"},M={key:0},x={key:1},k=Object(c["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),w={class:"modal-body"},U={class:"row"},P={class:"col-sm-4"},$={class:"mb-2"},C={class:"mb-3"},V=Object(c["g"])("label",{for:"imageUrl",class:"form-label"},"輸入主要圖片網址",-1),R=["src"],_={key:0,class:"mb-2"},I={class:"mb-3"},N=Object(c["g"])("label",{for:"imageUrl",class:"form-label"},"輸入主要圖片網址",-1),S=["onUpdate:modelValue"],L=["src"],G={key:0},A={key:1},F={key:1},E={class:"col-sm-8"},J={class:"mb-3"},z=Object(c["g"])("label",{for:"title",class:"form-label"},"標題",-1),T={class:"row"},q={class:"mb-3 col-md-6"},B=Object(c["g"])("label",{for:"category",class:"form-label"},"分類",-1),H={class:"mb-3 col-md-6"},K=Object(c["g"])("label",{for:"price",class:"form-label"},"單位",-1),Q={class:"row"},W={class:"mb-3 col-md-6"},X=Object(c["g"])("label",{for:"origin_price",class:"form-label"},"原價",-1),Y={class:"mb-3 col-md-6"},Z=Object(c["g"])("label",{for:"price",class:"form-label"},"售價",-1),tt=Object(c["g"])("hr",null,null,-1),et={class:"mb-3"},at=Object(c["g"])("label",{for:"description",class:"form-label"},"產品描述",-1),ct={class:"mb-3"},ot=Object(c["g"])("label",{for:"content",class:"form-label"},"說明內容",-1),lt={class:"mb-3"},nt={class:"form-check"},dt=Object(c["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),rt={class:"modal-footer"},it=Object(c["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function st(t,e,a,o,l,n){var d;return Object(c["x"])(),Object(c["f"])("div",f,[Object(c["g"])("div",h,[Object(c["g"])("div",v,[Object(c["g"])("div",y,[Object(c["g"])("h5",D,[a.isNew?(Object(c["x"])(),Object(c["f"])("span",M,"新增產品")):(Object(c["x"])(),Object(c["f"])("span",x,"編輯產品"))]),k]),Object(c["g"])("div",w,[Object(c["g"])("div",U,[Object(c["g"])("div",P,[Object(c["g"])("div",$,[Object(c["g"])("div",C,[V,Object(c["R"])(Object(c["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=function(t){return l.productData.imageUrl=t}),placeholder:"請輸入圖片連結"},null,512),[[c["M"],l.productData.imageUrl]])]),Object(c["g"])("img",{class:"img-fluid",src:l.productData.imageUrl,alt:""},null,8,R)]),Array.isArray(l.productData.imagesUrl)?(Object(c["x"])(),Object(c["f"])("div",_,[(Object(c["x"])(!0),Object(c["f"])(c["a"],null,Object(c["E"])(null===(d=l.productData)||void 0===d?void 0:d.imagesUrl,(function(t,e){return Object(c["x"])(),Object(c["f"])("div",{class:"mb-3",key:t},[Object(c["g"])("div",I,[N,Object(c["R"])(Object(c["g"])("input",{type:"text",class:"form-control","onUpdate:modelValue":function(t){return l.productData.imagesUrl[e]=t},placeholder:"請輸入圖片連結"},null,8,S),[[c["M"],l.productData.imagesUrl[e]]])]),Object(c["g"])("img",{class:"img-fluid",src:t,alt:""},null,8,L)])})),128)),!l.productData.imagesUrl.length||l.productData.imagesUrl[l.productData.imagesUrl.length-1]?(Object(c["x"])(),Object(c["f"])("div",G,[Object(c["g"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=function(t){return l.productData.imagesUrl.push("")})}," 新增圖片 ")])):(Object(c["x"])(),Object(c["f"])("div",A,[Object(c["g"])("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=function(t){return l.productData.imagesUrl.pop()})}," 刪除圖片 ")]))])):(Object(c["x"])(),Object(c["f"])("div",F,[Object(c["g"])("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return n.createImg&&n.createImg.apply(n,arguments)})}," 新增圖片 ")]))]),Object(c["g"])("div",E,[Object(c["g"])("div",J,[z,Object(c["R"])(Object(c["g"])("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=function(t){return l.productData.title=t})},null,512),[[c["M"],l.productData.title]])]),Object(c["g"])("div",T,[Object(c["g"])("div",q,[B,Object(c["R"])(Object(c["g"])("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.productData.category=t})},null,512),[[c["M"],l.productData.category]])]),Object(c["g"])("div",H,[K,Object(c["R"])(Object(c["g"])("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=function(t){return l.productData.unit=t})},null,512),[[c["M"],l.productData.unit]])])]),Object(c["g"])("div",Q,[Object(c["g"])("div",W,[X,Object(c["R"])(Object(c["g"])("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=function(t){return l.productData.origin_price=t})},null,512),[[c["M"],l.productData.origin_price]])]),Object(c["g"])("div",Y,[Z,Object(c["R"])(Object(c["g"])("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=function(t){return l.productData.price=t})},null,512),[[c["M"],l.productData.price]])])]),tt,Object(c["g"])("div",et,[at,Object(c["R"])(Object(c["g"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=function(t){return l.productData.description=t})},"\n                ",512),[[c["M"],l.productData.description]])]),Object(c["g"])("div",ct,[ot,Object(c["R"])(Object(c["g"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=function(t){return l.productData.content=t})},"\n                ",512),[[c["M"],l.productData.content]])]),Object(c["g"])("div",lt,[Object(c["g"])("div",nt,[Object(c["R"])(Object(c["g"])("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[11]||(e[11]=function(t){return l.productData.is_enabled=t})},null,512),[[c["L"],l.productData.is_enabled]]),dt])])])])]),Object(c["g"])("div",rt,[it,Object(c["g"])("button",{type:"button",class:"btn btn-primary",onClick:e[12]||(e[12]=function(t){return n.updataProduct(l.productData.id)})}," 確認 ")])])])],512)}var ut=a("7c2b"),bt=a.n(ut),pt={data:function(){return{productModal:"",productData:{}}},props:["product","isNew"],methods:{updataProduct:function(t){var e=this,a={data:Object(j["a"])({},this.productData)};!0===this.isNew?this.$http.post("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/product"),a).then((function(t){alert(t.data.message),e.productModal.hide(),e.$emit("get-data")})).catch((function(t){console.log(t)})):!1===this.isNew&&this.$http.put("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/product/").concat(t),a).then((function(t){alert(t.data.message),e.productModal.hide(),e.$emit("get-data")})).catch((function(t){console.log(t)}))},openModal:function(){this.productModal.show()},createImg:function(){this.productData.imagesUrl=[],this.productData.imagesUrl.push("")}},mounted:function(){this.productModal=new bt.a(this.$refs.productModal)},watch:{product:function(){this.productData=this.product}}},gt=a("6b0d"),Ot=a.n(gt);const jt=Ot()(pt,[["render",st]]);var mt=jt,ft={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},ht={class:"modal-dialog"},vt={class:"modal-content border-0"},yt=Object(c["g"])("div",{class:"modal-header bg-danger text-white"},[Object(c["g"])("h5",{id:"delProductModalLabel",class:"modal-title"},[Object(c["g"])("span",null,"刪除產品")]),Object(c["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Dt={class:"modal-body"},Mt=Object(c["h"])(" 是否刪除 "),xt={class:"text-danger"},kt=Object(c["h"])(" 商品(刪除後將無法恢復)。 "),wt={class:"modal-footer"},Ut=Object(c["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Pt(t,e,a,o,l,n){return Object(c["x"])(),Object(c["f"])("div",ft,[Object(c["g"])("div",ht,[Object(c["g"])("div",vt,[yt,Object(c["g"])("div",Dt,[Mt,Object(c["g"])("strong",xt,Object(c["I"])(a.product.title),1),kt]),Object(c["g"])("div",wt,[Ut,Object(c["g"])("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=function(){return n.delProduct&&n.delProduct.apply(n,arguments)})}," 確認刪除 ")])])])],512)}var $t={data:function(){return{delModal:""}},props:["product"],methods:{openModal:function(){this.delModal.show()},delProduct:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/product/").concat(this.product.id)).then((function(e){alert(e.data.message),t.delModal.hide(),t.$emit("get-data")})).catch((function(t){console.log(t)}))}},mounted:function(){this.delModal=new bt.a(this.$refs.delProductModal)}};const Ct=Ot()($t,[["render",Pt]]);var Vt=Ct,Rt={data:function(){return{productsData:[],pagination:{},product:{},isNew:!1}},methods:{getProductsData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("kevinhesapi","/admin/products?page=").concat(e)).then((function(e){t.productsData=e.data.products,t.pagination=e.data.pagination})).catch((function(t){console.dir(t)}))},openModal:function(t,e){"new"===t?(this.isNew=!0,this.product={imagesUrl:[]},this.$refs.productModal.openModal()):"edit"===t?(this.product=Object(j["a"])({},e),this.$refs.productModal.openModal()):"delete"===t&&(this.product=Object(j["a"])({},e),this.$refs.delModal.openModal())}},components:{Pagination:m["a"],ProductModal:mt,DelModal:Vt},mounted:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t,this.getProductsData()}};const _t=Ot()(Rt,[["render",O]]);e["default"]=_t},e01a:function(t,e,a){"use strict";var c=a("23e7"),o=a("83ab"),l=a("da84"),n=a("e330"),d=a("1a2d"),r=a("1626"),i=a("3a9b"),s=a("577e"),u=a("9bf2").f,b=a("e893"),p=l.Symbol,g=p&&p.prototype;if(o&&r(p)&&(!("description"in g)||void 0!==p().description)){var O={},j=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:s(arguments[0]),e=i(g,this)?new p(t):void 0===t?p():p(t);return""===t&&(O[e]=!0),e};b(j,p),j.prototype=g,g.constructor=j;var m="Symbol(test)"==String(p("test")),f=n(g.toString),h=n(g.valueOf),v=/^Symbol\((.*)\)[^)]+$/,y=n("".replace),D=n("".slice);u(g,"description",{configurable:!0,get:function(){var t=h(this),e=f(t);if(d(O,t))return"";var a=m?D(e,7,-1):y(e,v,"$1");return""===a?void 0:a}}),c({global:!0,forced:!0},{Symbol:j})}}}]);
//# sourceMappingURL=chunk-765ccbe6.4e16b810.js.map